/* LAS Contribution Rate Checker – styles.css (contrast-safe, input fixes)
   ---------------------------------------------------------------------- */

:root{
  --brand:#023020;
  --text:#111111;
  --muted:#4A5568;
  --bg:#FAFAFA;
  --panel:#FFFFFF;
  --border:#D6D9DC;
  --focus:#0B69A3;

  --thead-bg:#F2F5F3;
  --thead-text:#0B3A2D;
  --row-active-bg:#E8F4F0;
  --row-active-text:#111111;
}

*{ box-sizing:border-box; }
html,body{ margin:0; padding:0; }
body{
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
  line-height:1.5;
}
::placeholder{ color:var(--muted); opacity:1; }

.las-wrap{ max-width: 980px; margin: 0 auto; padding: 20px; }

/* Header */
.las-header{
  background: var(--brand); color:#fff; padding: 22px 20px;
  border-radius: 12px; display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:18px;
}
.las-header h1{ margin:0 0 4px 0; font-size: 22px; }
.las-header .sub{ margin:0; opacity:.95; }
.hc-toggle{ font-weight:600; display:flex; align-items:center; gap:8px; }
.hc-toggle input{ width:18px; height:18px; }

/* Panels */
.las-panel{
  background:var(--panel); color:var(--text);
  border:1px solid var(--border); border-radius:12px; padding:18px; margin-bottom:16px;
}
.panel-title{ margin:0 0 12px 0; font-size:18px; color:var(--brand); }

/* Form */
.grid{ display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:14px; }
.form-row{ display:flex; flex-direction:column; gap:6px; }
.form-row span{ font-weight:600; }

/* IMPORTANT: inputs/selects now follow current theme colors */
.form-row input,
.form-row select,
textarea{
  border:1px solid var(--border);
  background:var(--panel);     /* was #fff */
  color:var(--text);           /* ensures readable in dark mode */
  border-radius:8px;
  padding:10px 12px;
  font-size:16px;
}
.form-row input:focus,
.form-row select:focus,
textarea:focus{ outline:3px solid var(--focus); outline-offset:2px; }

/* Improve select + option legibility in dark mode (some UAs ignore option bg) */
select{ color:var(--text); background:var(--panel); }
option{ color:var(--text); background:var(--panel); }

.help{ color:var(--muted); }

/* Details blocks */
.helper{ margin-top:10px; border:1px solid var(--border); border-radius:10px; padding:10px 12px; background:var(--panel); color:var(--text); }
.helper summary{ cursor:pointer; font-weight:700; }
/* Button row */
.form-actions{
  display:flex;
  align-items:center;
  flex-wrap:wrap;           /* wrap on small screens */
  gap:12px;                 /* space between buttons */
  margin-block:12px 16px;   /* space above and below the row */
}

/* Fallback if you don’t trust flex gap everywhere */
.form-actions > * + *{ margin-inline-start:12px; }

/* Optional: ensure the info banner below never hugs the buttons */
.info-banner{ margin-top:12px; }

/* Small screens: slightly tighter vertical rhythm */
@media (max-width:480px){
  .form-actions{ gap:10px; margin-block:10px 14px; }
}


/* Actions / Buttons */
.actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
.btn{
  appearance:none; background:var(--panel); color:var(--brand);
  border:2px solid var(--brand); padding:10px 14px; border-radius:10px;
  font-weight:700; cursor:pointer;
}
.btn:hover{ background:#F0F7F4; }
.btn:focus-visible{ outline:3px solid var(--focus); outline-offset:2px; }
.btn.primary{ background:var(--brand); color:#fff; }
.btn.primary:hover{ background:#0d4132; }
.btn.danger{ border-color:#b00020; color:#b00020; }
.btn.danger:hover{ background:#ffe9ec; }

/* High-contrast note + warning (max legibility) */
.note{
  display:flex; gap:10px; align-items:flex-start;
  background:var(--panel); color:var(--text);
  border:2px solid var(--border); border-left:6px solid var(--brand);
  border-radius:10px; padding:12px 14px;
}
.note .note-icon{ font-size:18px; line-height:1; color:var(--brand); flex-shrink:0; }
.warn{
  display:flex; gap:10px; align-items:flex-start;
  background:var(--panel); color:var(--text);
  border:2px solid var(--border); border-left:6px solid #9F3131;
  border-radius:10px; padding:12px 14px; margin:8px 0;
}
.warn-icon{ font-size:18px; line-height:1; color:#9F3131; }

/* Results */
.result-row{ display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:12px; align-items:stretch; margin-bottom:10px; }
.result-row.alt{ grid-template-columns: repeat(3, minmax(0,1fr)); }
.kpi, .result-row.alt > div{
  border:1px solid var(--border); border-radius:10px; padding:12px; background:var(--panel); color:var(--text);
}
.kpi-label{ font-weight:700; color:var(--muted); }
.kpi-value{ font-size:24px; font-weight:900; margin-top:4px; }
.kpi-small-label{ font-weight:700; color:var(--muted); }
.kpi-small-value{ font-size:18px; font-weight:800; margin-top:2px; }

/* Band table */
.band-meta{ display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; color:var(--text); }
.band-meta .sep{ margin: 0 8px; color:var(--muted); }
.table-wrap{ overflow:auto; border:1px solid var(--border); border-radius:10px; }
.table{ border-collapse:separate; border-spacing:0; width:100%; min-width:520px; }
.table th, .table td{ text-align:left; padding:10px 12px; border-bottom:1px solid var(--border); background:var(--panel); color:var(--text); }
.table thead th{ background:var(--thead-bg); color:var(--thead-text); position:sticky; top:0; z-index:1; }
.table .idx{ width:48px; }
.table tr.active td{ background:var(--row-active-bg); color:var(--row-active-text); font-weight:700; }

/* Admin */
.admin textarea{
  width:100%; border:1px solid var(--border); border-radius:10px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  padding:10px 12px; color:var(--text); background:var(--panel);
}
.preview{ background:#0b1220; color:#d1e7ff; padding:12px; border-radius:10px; overflow:auto; max-height:300px; }

/* Footer */
.foot{ text-align:center; color:var(--muted); margin: 12px 0 24px; }

/* Accessibility */
:focus-visible{ outline:3px solid var(--focus); outline-offset:3px; border-radius:6px; }
@media (prefers-reduced-motion: reduce){ *{ transition:none !important; animation:none !important; } }

/* High-contrast toggle */
body.hc{
  --bg:#FFFFFF; --panel:#FFFFFF; --text:#0A0A0A; --muted:#1F2937; --border:#7D848A;
  --thead-bg:#E7EFEA; --thead-text:#0A2D23; --row-active-bg:#D9EFE6; --row-active-text:#0A0A0A;
}
@media (prefers-color-scheme: dark){
  body.hc{
    --bg:#0A0A0A; --panel:#0A0A0A; --text:#FFFFFF; --muted:#E5E7EB; --border:#6B7280;
    --thead-bg:#111716; --thead-text:#D6EFE6; --row-active-bg:#0F2F26; --row-active-text:#FFFFFF;
  }
}

/* Auto dark mode (without HC) */
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0f1214; --panel:#121618; --text:#EDEFF1; --muted:#C7CFD6; --border:#2C343A;
    --thead-bg:#1A2420; --thead-text:#D6EFE6; --row-active-bg:#0F2F26; --row-active-text:#EDEFF1;
  }
  .las-header{ color:#fff; }
}

/* Responsive */
@media (max-width: 720px){
  .grid{ grid-template-columns: 1fr; }
  .helper-grid{ grid-template-columns: 1fr; }
  .result-row, .result-row.alt{ grid-template-columns: 1fr; }
}
