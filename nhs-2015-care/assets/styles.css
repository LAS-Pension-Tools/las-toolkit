:root {
  --brand:#023020; --muted:#6b7280; --bg:#f8fafb; --fg:#111; --card:#fff; --line:#e5e7eb; --pill-bg:#eef5f0; --pill-fg:#0b5d2a;
  --th-bg:#eef5f0; --th-fg:#111; --shadow:0 1px 2px rgba(0,0,0,.04);
  --btn-bg:#023020; --btn-fg:#fff; --btn-outline-fg:#023020; --btn-outline-bg:#fff; --danger:#b42318;
}
@media (prefers-color-scheme: dark) {
  :root { --bg:#0b0f0c; --fg:#e6efe9; --card:#0f1411; --line:#1f2a22; --pill-bg:#10271a; --pill-fg:#a5f3c1; --th-bg:#0f1e17; --th-fg:#e6efe9; --shadow:none; --muted:#9aa7a0; --btn-outline-bg:transparent; }
}
:root[data-theme="light"] { --bg:#f8fafb; --fg:#111; --card:#fff; --line:#e5e7eb; --pill-bg:#eef5f0; --pill-fg:#0b5d2a; --th-bg:#eef5f0; --th-fg:#111; --muted:#6b7280; --shadow:0 1px 2px rgba(0,0,0,.04); --btn-outline-bg:#fff; }
:root[data-theme="dark"]  { --bg:#0b0f0c; --fg:#e6efe9; --card:#0f1411; --line:#1f2a22; --pill-bg:#10271a; --pill-fg:#a5f3c1; --th-bg:#0f1e17; --th-fg:#e6efe9; --muted:#9aa7a0; --shadow:none; --btn-outline-bg:transparent; }

body.compact { font-size: 14px; }
body.compact .site-header h1 { font-size: 18px; }
body.compact .controls input, body.compact .controls button { padding:6px 10px; }
body.compact .card-header { padding:10px 14px; }
body.compact .table-wrap { max-height: 52vh; }

body[data-embed="1"] .site-header, body[data-embed="1"] .site-footer { display:none; }
body[data-embed="1"] .wrap { margin-top: 12px; }

html, body { height:100%; }
body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; margin:0; background:var(--bg); color:var(--fg); }
.site-header { padding: 24px 16px; border-bottom:3px solid var(--brand); background:var(--card); }
.site-header h1 { margin: 0 0 6px; color: var(--brand); font-size: clamp(18px, 3vw, 24px); }
.site-header p { margin: 0; color: var(--muted); }

.wrap { max-width: 1080px; margin: 20px auto; padding: 0 16px 48px; }
.tabs { display:flex; gap:8px; padding: 0 2px 14px; }
.tab { padding:8px 12px; border:1px solid var(--line); background:var(--card); border-radius:999px; cursor:pointer; color:var(--fg); }
.tab.active { border-color: var(--brand); box-shadow: inset 0 0 0 2px var(--brand)/20; }

.panel { display:none; }
.panel.active { display:block; }
.card { background:var(--card); border:1px solid var(--line); border-radius: 12px; box-shadow: var(--shadow); overflow: hidden; }
.card-header { border:0; padding:16px 20px; }
.muted { color: var(--muted); font-size: 14px; line-height: 1.45; }

.controls { display:flex; flex-wrap:wrap; gap:12px; align-items:center; padding: 16px 20px; border-top:1px solid var(--line); }
.controls .spacer { flex:1; }
.controls input[type="number"], controls input[type="text"], select { padding:8px 10px; border:1px solid var(--line); border-radius: 8px; min-width: 120px; background: transparent; color: var(--fg); }
.controls .btn { padding:10px 14px; border:1px solid var(--brand); background: var(--btn-bg); color:var(--btn-fg); border-radius:10px; cursor:pointer; }
.controls .btn.outline { background: var(--btn-outline-bg); color: var(--btn-outline-fg); }
.controls .btn.danger { border-color: var(--danger); color: var(--danger); background:transparent; }
.controls .btn.file { position: relative; overflow: hidden; }
.controls .btn.file input { position:absolute; inset:0; opacity:0; cursor:pointer; }

.table-wrap { overflow:auto; max-height: 60vh; border-top:1px solid var(--line); }
table { width:100%; border-collapse: collapse; }
thead th { position: sticky; top: 0; background:var(--th-bg); color:var(--th-fg); border-bottom: 1px solid var(--line); padding:10px; text-align:center; font-weight:600; }
tbody td { border-bottom:1px solid var(--line); padding:8px 10px; text-align:right; }
tbody td.center, thead th.center { text-align:center; }
tbody input[type="number"], tbody input[type="text"] { width: 140px; padding:6px 8px; border:1px solid var(--line); border-radius:8px; text-align:right; background: transparent; color: var(--fg); }
tbody input[type="text"].center { text-align:center; width: 90px; }
tfoot td { padding: 14px 10px; font-weight:700; }
.summary { display:flex; flex-wrap:wrap; gap:14px; align-items:center; padding: 16px 20px; border-top:1px solid var(--line); }
.pill { display:inline-block; padding:6px 10px; border-radius:999px; background:var(--pill-bg); color:var(--pill-fg); font-weight:600; }

.settings-grid { display:grid; grid-template-columns: minmax(240px, 1fr); gap:16px; padding: 16px 20px; }
.setting .label { font-weight: 600; margin-bottom: 6px; display:block; }
.setting .row { display:flex; gap:10px; align-items:center; }

.results-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:12px; padding: 12px 20px 20px; border-top:1px solid var(--line); }
.result { display:flex; justify-content:space-between; align-items:center; padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:var(--card); }
.result .k { color:var(--muted); margin-right:10px; }

.site-footer { padding: 16px; color: var(--muted); font-size: 13px; }
@media print { .controls, .summary, .site-footer, .tabs, .settings-grid { display:none; } .site-header { border:0; } .card { box-shadow:none; border:0; } }
