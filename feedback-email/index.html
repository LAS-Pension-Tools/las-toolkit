<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>LAS Pensions Tools – Feedback</title>
<meta name="description" content="Send feedback or report an issue with LAS Pensions tools.">

<!-- Favicon: LAS green with £ -->
<link rel="icon" type="image/svg+xml"
 href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='6' fill='%23023020'/%3E%3Ctext x='16' y='22' text-anchor='middle' font-family='Arial, sans-serif' font-size='18' font-weight='bold' fill='%23FFFFFF'%3E%C2%A3%3C/text%3E%3C/svg%3E">

<style>
  :root{
    --las-green:#023020;
    --nhs-blue:#005EB8;
    --ink:#111827;        /* main text */
    --muted:#4B5563;      /* hints / muted copy */
    --bg:#F7FAFC;
    --card:#FFFFFF;
    --border:#D1D5DB;
    --focus:#FFB81C;      /* NHS yellow for strong focus and HC primary button */
  }
  *{box-sizing:border-box}
  html:focus-within{scroll-behavior:smooth}
  @media (prefers-reduced-motion: reduce){ html:focus-within{scroll-behavior:auto} }

  body{
    margin:0; font-family:Inter, Arial, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", sans-serif;
    background:var(--bg); color:var(--ink); line-height:1.6; font-size:16px;
  }
  .wrap{max-width:900px; margin:24px auto; padding:0 16px}
  a{color:var(--nhs-blue)}
  a:focus-visible, button:focus-visible, select:focus-visible, input:focus-visible, textarea:focus-visible{
    outline:3px dashed var(--focus); outline-offset:2px;
  }
  .skip{position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden}
  .skip:focus{left:16px; top:10px; width:auto; height:auto; background:#fff; padding:8px 10px; border-radius:8px; z-index:999}

  header{display:flex; justify-content:space-between; align-items:center; gap:8px; flex-wrap:wrap; margin-bottom:12px}
  .brand{border-left:8px solid var(--nhs-blue); background:#F4F8FF; padding:14px; border-radius:12px; flex:1 1 520px}
  h1{margin:0 0 6px; color:var(--las-green); font-size:1.9rem; line-height:1.2}
  p.lead{margin:0; color:var(--ink)}

  .a11y{display:flex; gap:8px; flex-wrap:wrap}
  .a11y button{border:1px solid var(--border); background:#fff; color:var(--ink); padding:10px 12px; border-radius:10px; cursor:pointer; font-weight:600}

  main{display:block}
  form{background:var(--card); border:1px solid var(--border); border-radius:12px; padding:16px}
  fieldset{border:none; margin:0 0 14px; padding:0}
  legend{font-weight:700; color:var(--las-green); margin-bottom:8px}
  label{display:block; font-size:1rem; color:var(--ink); margin:8px 0 6px}
  input[type="text"], input[type="datetime-local"], input[type="email"], select, textarea{
    width:100%; padding:12px 14px; border:1px solid var(--border); border-radius:10px; font-size:1rem; background:#fff; color:var(--ink);
  }
  input::placeholder, textarea::placeholder{color:#6B7280}
  textarea{min-height:120px; resize:vertical}
  .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:12px}
  .hint{font-size:0.95rem; color:var(--muted)}
  .actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
  button,.btn{display:inline-block; border:1px solid var(--nhs-blue); background:var(--nhs-blue); color:#fff; padding:12px 16px; border-radius:10px; font-weight:700; text-decoration:none; cursor:pointer}
  button.secondary,.btn.secondary{background:#fff; color:var(--nhs-blue)}
  .note{margin-top:10px; font-size:0.95rem; color:var(--ink)}
  .note ul{margin:8px 0 0 18px}
  .footer{margin-top:12px; font-size:0.9rem; color:var(--muted)}

  /* High-contrast mode */
  body.hc{
    --bg:#000; --card:#111; --border:#FFFFFF; --ink:#FFFFFF; --muted:#E5E7EB; --nhs-blue:#9BCBFF;
    color:var(--ink);
  }
  body.hc .brand{background:#111; border-left-color:#9BCBFF}
  body.hc h1{color:#FFFFFF}
  body.hc p.lead{color:var(--ink)}
  body.hc legend{color:#FFFFFF}
  body.hc label{color:var(--ink)}
  body.hc input, body.hc select, body.hc textarea{
    background:#000; color:#FFFFFF; border-color:#FFFFFF;
  }
  body.hc input::placeholder, body.hc textarea::placeholder{color:#D1D5DB}
  /* Buttons in HC: very distinct */
  body.hc button{background:var(--focus); color:#000; border-color:var(--focus)}
  body.hc button.secondary{background:#000; color:var(--focus); border:2px solid var(--focus)}
  body.hc .note{color:var(--ink)}
  body.hc .footer{color:var(--muted)}

  /* Large-text mode (bumps everything, including controls) */
  body.lg{font-size:18px}
  body.lg h1{font-size:2.2rem}
  body.lg .hint{font-size:1.05rem}
  body.lg button{padding:14px 18px}
</style>
</head>
<body>
<a class="skip" href="#formStart">Skip to form</a>

<div class="wrap" role="application" aria-labelledby="page-title">
  <header>
    <div class="brand" id="page-title">
      <h1>LAS Pensions Tools – Feedback</h1>
      <p class="lead">Tell us about a bug, incorrect data, unclear content, or suggest an improvement.
        This opens an email to <strong>londamb.Pensions@nhs.net</strong>. You can attach screenshots after it opens.</p>
    </div>
    <div class="a11y" aria-label="Accessibility options">
      <button type="button" id="btnLarge" aria-pressed="false">A A (Large text)</button>
      <button type="button" id="btnContrast" aria-pressed="false">High contrast</button>
    </div>
  </header>

  <main id="main" role="main">
    <form id="fbForm" aria-describedby="formHelp">
      <p id="formHelp" class="hint">Required fields are marked.</p>
      <span id="formStart" tabindex="-1"></span>

      <fieldset class="grid">
        <div>
          <label for="category">What do you need to tell us? <span class="hint">(required)</span></label>
          <select id="category" required aria-required="true">
            <option value="" selected disabled>Choose one…</option>
            <option>Bug / something broken</option>
            <option>Data looks wrong</option>
            <option>Content unclear / needs update</option>
            <option>Feature request / improvement</option>
            <option>General feedback</option>
          </select>
        </div>
        <div>
          <label for="tool">Which tool/page is this about? <span class="hint">(required)</span></label>
          <select id="tool" required aria-required="true">
            <option value="" selected disabled>Choose one…</option>
            <option>Contribution Rate Checker</option>
            <option>Refund Eligibility Flow</option>
            <option>Partial Retirement</option>
            <option>2015 CARE Calculator</option>
            <option>Opt-Out Calculator</option>
            <option>New Starter</option>
            <option>McCloud Remedy</option>
            <option>Other (see below)</option>
          </select>
        </div>
      </fieldset>

      <fieldset>
        <label for="other">If “Other”, name the tool or paste the URL</label>
        <input type="text" id="other" placeholder="e.g. https://las-pension-tools.github.io/las-toolkit/contribution-rate-checker/">
      </fieldset>

      <fieldset class="grid">
        <div>
          <label for="impact">Impact on you/others</label>
          <select id="impact">
            <option>Blocker (can’t proceed)</option>
            <option>Major issue (workaround exists)</option>
            <option>Minor issue</option>
            <option>Not an issue, just a suggestion</option>
          </select>
        </div>
        <div>
          <label for="frequency">How often does it happen?</label>
          <select id="frequency">
            <option>Once</option>
            <option>Sometimes</option>
            <option>Always / every attempt</option>
          </select>
        </div>
        <div>
          <label for="priority">Priority (your view)</label>
          <select id="priority">
            <option>High</option>
            <option selected>Medium</option>
            <option>Low</option>
          </select>
        </div>
      </fieldset>

      <fieldset class="grid">
        <div>
          <label for="browser">Browser</label>
          <select id="browser">
            <option>Edge</option><option>Chrome</option><option>Safari</option><option>Firefox</option><option>Other / Not sure</option>
          </select>
        </div>
        <div>
          <label for="device">Device / OS</label>
          <select id="device">
            <option>Windows desktop/laptop</option><option>macOS</option><option>iPhone/iPad (iOS/iPadOS)</option><option>Android</option><option>Other</option>
          </select>
        </div>
        <div>
          <label for="dt">Date & time you experienced the issue</label>
          <input type="datetime-local" id="dt">
        </div>
      </fieldset>

      <fieldset>
        <label for="summary">Short summary <span class="hint">(required)</span></label>
        <input type="text" id="summary" placeholder="e.g. 2015 CARE: year selector not loading" required aria-required="true" autocomplete="off">
      </fieldset>

      <fieldset class="grid">
        <div>
          <label for="expected">What did you expect?</label>
          <textarea id="expected" placeholder="What you thought would happen…"></textarea>
        </div>
        <div>
          <label for="actual">What did you see?</label>
          <textarea id="actual" placeholder="What actually happened… Include any error text."></textarea>
        </div>
      </fieldset>

      <fieldset>
        <label for="steps">Steps to reproduce (if it’s a bug)</label>
        <textarea id="steps" placeholder="1) … 2) … 3) …"></textarea>
        <div class="hint">Attach screenshots after the email opens.</div>
      </fieldset>

      <fieldset class="grid">
        <div>
          <label for="name">Your name</label>
          <input type="text" id="name" autocomplete="name">
        </div>
        <div>
          <label for="email">Your email</label>
          <input type="email" id="email" autocomplete="email">
        </div>
        <div>
          <label for="dept">Department / Location</label>
          <input type="text" id="dept">
        </div>
      </fieldset>

      <fieldset>
        <label><input type="checkbox" id="ok" checked> OK to contact me for clarification</label>
      </fieldset>

      <div class="actions">
        <button type="submit" id="sendBtn" aria-label="Send email to the LAS Pensions inbox">Send email</button>
        <button type="button" class="secondary" id="copyBtn" aria-label="Copy the email text so you can paste it into Outlook Web">Copy email text</button>
      </div>

      <div class="note">
        <strong>What to include:</strong>
        <ul>
          <li>Tool name / URL and a short summary</li>
          <li>Steps to reproduce + what you expected vs what you saw</li>
          <li>How often it happens and the impact (blocker/major/minor)</li>
          <li>Your browser (Edge/Chrome/etc.) and device (Windows/macOS/iOS/Android)</li>
          <li>Screenshot(s) of any error</li>
        </ul>
        Privacy: please avoid sensitive identifiers (e.g., NI numbers). Share only what’s needed.
      </div>
    </form>

    <div class="footer">LAS Pensions • This page generates an email to londamb.Pensions@nhs.net • v1.3</div>
  </main>
</div>

<script>
(function(){
  const form = document.getElementById('fbForm');
  const to = 'londamb.Pensions@nhs.net';

  function v(id){ return (document.getElementById(id).value || '').trim(); }
  function yn(id){ return document.getElementById(id).checked ? 'Yes' : 'No'; }

  function subject(){
    const tool = v('tool') || 'Tool not specified';
    const cat  = v('category') || 'Feedback';
    const prio = v('priority') || 'Medium';
    return `[LAS Pensions Tools] ${tool} – ${cat} – ${prio}`;
  }
  function body(){
    const lines = [];
    lines.push(`Summary: ${v('summary')}`);
    lines.push(`Category: ${v('category')}`);
    lines.push(`Tool / Page: ${v('tool')}`);
    if(v('other')) lines.push(`Other tool / URL: ${v('other')}`);
    lines.push(`Impact: ${v('impact')}`);
    lines.push(`Frequency: ${v('frequency')}`);
    lines.push(`Priority (user view): ${v('priority')}`);
    lines.push(`Browser: ${v('browser')}`);
    lines.push(`Device / OS: ${v('device')}`);
    if(v('dt')) lines.push(`Date/time: ${v('dt')}`);
    lines.push('');
    if(v('expected')) lines.push(`Expected:\n${v('expected')}\n`);
    if(v('actual')) lines.push(`Actual:\n${v('actual')}\n`);
    if(v('steps')) lines.push(`Steps to reproduce:\n${v('steps')}\n`);
    lines.push(`OK to contact?: ${yn('ok')}`);
    if(v('name')) lines.push(`Your name: ${v('name')}`);
    if(v('email')) lines.push(`Your email: ${v('email')}`);
    if(v('dept')) lines.push(`Dept/Location: ${v('dept')}`);
    lines.push('');
    lines.push('Attachments: please add any screenshots before sending.');
    return lines.join('\n');
  }
  function openMail(){
    const url = `mailto:${to}?subject=${encodeURIComponent(subject())}&body=${encodeURIComponent(body())}`;
    window.location.href = url;
  }
  function copyToClipboard(text){
    (navigator.clipboard ? navigator.clipboard.writeText(text) :
      new Promise((res)=>{ const ta=document.createElement('textarea'); ta.value=text; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); document.body.removeChild(ta); res(); })
    ).then(()=> alert('Copied. Open Outlook Web, start a new message to londamb.Pensions@nhs.net, paste, and attach screenshots.'));
  }

  form.addEventListener('submit', function(e){
    e.preventDefault();
    if(!v('summary') || !v('category') || !v('tool')){
      alert('Please complete Summary, Category and Tool/Page.');
      return;
    }
    openMail();
  });
  document.getElementById('copyBtn').addEventListener('click', function(){
    copyToClipboard(`To: ${to}\nSubject: ${subject()}\n\n${body()}`);
  });

  // Accessibility toggles with persistence
  const btnL=document.getElementById('btnLarge');
  const btnC=document.getElementById('btnContrast');

  function applyPrefs(){
    const lg = localStorage.getItem('las_fb_lg') === '1';
    const hc = localStorage.getItem('las_fb_hc') === '1';
    document.body.classList.toggle('lg', lg);
    document.body.classList.toggle('hc', hc);
    btnL.setAttribute('aria-pressed', lg);
    btnC.setAttribute('aria-pressed', hc);
  }
  btnL.addEventListener('click', ()=>{
    const newVal = !document.body.classList.contains('lg');
    localStorage.setItem('las_fb_lg', newVal ? '1' : '0');
    applyPrefs();
  });
  btnC.addEventListener('click', ()=>{
    const newVal = !document.body.classList.contains('hc');
    localStorage.setItem('las_fb_hc', newVal ? '1' : '0');
    applyPrefs();
  });
  applyPrefs();
})();
</script>
</body>
</html>
