<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex, nofollow, noarchive" />
  <title>LAS Partial Retirement Checklist</title>
  <link rel="icon" type="image/svg+xml"
    href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='4' fill='%23023020'/%3E%3Ctext x='16' y='20' font-family='Arial' font-size='14' font-weight='bold' text-anchor='middle' fill='white'%3EPR%3C/text%3E%3C/svg%3E">

  <style>
    :root {
      --green: #023020;
      --green-contrast: #002D18;
      --text: #1A1A1A;
      --bg: #FAFAFA;
      --border: #CCCCCC;
      --accent: #F57C00;
      --accent-bg: #FFF8E1;
      --success-bg: #E8F5E9;
      --list-bg: #F8F9FA;
      --list-hover: #F0F7F4;
    }
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.7;
    }
    .container { max-width: 900px; margin: 0 auto; padding: 20px; }
    .contrast-toggle { display: flex; justify-content: flex-end; margin-bottom: 12px; }
    .contrast-toggle button {
      background: var(--green); color: white; border: 2px solid var(--green);
      padding: 10px 20px; border-radius: 6px; font-weight: 600; cursor: pointer;
    }
    .contrast-toggle button:hover { background: white; color: var(--green); }

    .header {
      background: var(--green); color: white; padding: 30px; text-align: center;
      border-radius: 8px; margin-bottom: 25px;
    }
    .header h1 { margin: 0 0 8px 0; font-size: 28px; }

    .alert-box {
      background: var(--accent-bg); border: 3px solid var(--accent);
      padding: 20px; margin-bottom: 25px; border-radius: 8px;
    }
    .alert-box h2 { color: #E65100; margin: 0 0 10px 0; font-size: 18px; }

    .progress-container {
      background: white; border: 2px solid var(--border);
      padding: 20px; border-radius: 8px; margin-bottom: 25px;
    }
    .progress-label {
      display: flex; justify-content: space-between; margin-bottom: 12px; font-weight: 600;
    }
    .progress-bar {
      width: 100%; height: 30px; background: #E0E0E0;
      border: 2px solid var(--green); border-radius: 4px; overflow: hidden;
    }
    .progress-fill {
      height: 100%; width: 0%; background: var(--green); color: white;
      display: flex; align-items: center; justify-content: center; font-weight: 600;
      transition: width 0.25s ease;
    }
    .timestamp { text-align: right; font-size: 14px; margin-top: 8px; color: #333; }

    .section {
      background: white; border: 2px solid var(--border);
      padding: 28px; border-radius: 8px; margin-bottom: 20px;
    }
    .step-header {
      display: flex; gap: 15px; align-items: flex-start;
      border-bottom: 2px solid #E0E0E0; padding-bottom: 10px; margin-bottom: 15px;
    }
    .step-number {
      background: var(--green); color: white;
      width: 40px; height: 40px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center; font-weight: 700;
    }
    .step-title h2 { margin: 0; color: var(--green); font-size: 20px; }
    .step-title p { margin: 2px 0 0 0; color: #666; font-size: 14px; }

    .checklist { list-style: none; padding: 0; margin: 0; }
    .checklist-item {
      display: flex; align-items: flex-start; gap: 15px;
      background: var(--list-bg); border: 1px solid #E0E0E0; border-radius: 6px;
      padding: 15px; margin-bottom: 12px; cursor: pointer; transition: all 0.2s;
    }
    .checklist-item:hover { background: var(--list-hover); border-color: var(--green); }
    .checkbox {
      width: 26px; height: 26px; border: 2px solid var(--green);
      border-radius: 5px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;
    }
    .checkbox.checked { background: var(--green); }
    .checkbox.checked::after { content: 'âœ“'; color: white; font-weight: 700; }
    .checklist-item.completed { background: var(--success-bg); }
    .checklist-item.completed .checklist-content { text-decoration: line-through; color: #555; }

    .info-box {
      background: #E8F4F0; border-left: 5px solid var(--green);
      padding: 16px; border-radius: 4px; margin-top: 10px;
    }
    .reminder-box {
      background: #FFF3E0; border: 2px solid var(--accent);
      padding: 20px; border-radius: 8px;
    }
    .reminder-box h2 { color: #E65100; margin: 0 0 10px 0; }

    .action-buttons { display: flex; gap: 15px; justify-content: center; margin-top: 28px; }
    .button {
      background: var(--green); color: white; border: 2px solid var(--green);
      padding: 14px 26px; border-radius: 6px; font-weight: 600; cursor: pointer;
    }
    .button:hover { background: white; color: var(--green); }

    /* High-contrast mode */
    body.high-contrast { background: #FDFCF7; color: #000; }
    body.high-contrast .header { background: #002D18; color: #FFFBEA; }
    body.high-contrast .section { background: #FFFBEA; border-color: #002D18; }
    body.high-contrast .alert-box { background: #FFF0C2; border-color: #D18B00; }
    body.high-contrast .checkbox { border-color: #002D18; }
    body.high-contrast .checkbox.checked { background: #002D18; }
    body.high-contrast .button { background: #002D18; border-color: #002D18; }
    body.high-contrast .button:hover { background: #FFFBEA; color: #002D18; }

    @media print {
      .contrast-toggle, .action-buttons { display: none; }
      .checklist-item { break-inside: avoid; }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="contrast-toggle">
      <button id="contrastBtn" aria-pressed="false">Enable High-Contrast Mode</button>
    </div>

    <header class="header">
      <h1>ðŸŽ¯ LAS Partial Retirement Checklist</h1>
      <p>Track your progress through each stage of your Partial Retirement process</p>
    </header>

    <div class="alert-box">
      <h2>ðŸ“‹ Important Note</h2>
      <p>This checklist helps you track your Partial Retirement process. You wonâ€™t complete every step yourselfâ€”your manager, HR, Payroll, and the LAS Pensions Team are also involved. Monitor progress and follow up as needed.</p>
    </div>

    <div class="progress-container">
      <div class="progress-label">
        <span>Overall Progress</span>
        <span id="progressText">0% Complete</span>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" id="progressBar"></div>
      </div>
      <div class="timestamp" id="lastUpdated">Last updated: never</div>
    </div>

    <main id="steps"></main>

    <div class="reminder-box">
      <h2>Important Reminder:</h2>
      <ul>
        <li>âœ“ All forms are completed accurately</li>
        <li>âœ“ Key dates and details (especially working pattern) are consistent across documents</li>
        <li>âœ“ MSS form and HR letter match in agreed start date and reduced hours</li>
        <li>âœ“ The partial retirement start date is not on a rest day</li>
      </ul>
    </div>

    <div class="action-buttons">
      <button class="button" id="printBtn">ðŸ“„ Print Checklist</button>
      <button class="button button-secondary" id="resetBtn">ðŸ”„ Reset All</button>
    </div>
  </div>

  <script>
    const stepsData = [
      { title: "Confirm Eligibility", desc: "Verify you meet the requirements for partial retirement", items: [
        "Confirm you meet the eligibility criteria: age 55+ and active NHS Pension Scheme member (no working pattern change in last 12 months).",
        "Review the Guidelines for Partial Retirement Requests to understand the requirements."
      ]},
      { title: "Request a Pension Estimate", desc: "Get an estimate of your pension benefits", items: [
        "Submit the Partial Retirement Estimate Request Form to NHS Pensions."
      ]},
      { title: "Agree a Flexible Working Arrangement", desc: "Discuss new working pattern with your manager", items: [
        "Discuss and agree a new working pattern with your line manager ensuring it reflects at least a 10% reduction in pensionable pay for 12 months.",
        "Submit a Flexible Working Request Form for line manager and HR approval.",
        "Ensure the new working pattern is clearly documented and agreed in writing."
      ], info: "ðŸ’¡ Key Requirement: Your pensionable pay must reduce by at least 10% for a minimum of 12 months. âš  The start date for partial retirement must not fall on a rest day."},
      { title: "Notify Pensions and Begin Application", desc: "Inform LAS Pensions and request the pack", items: [
        "Contact the LAS Pensions Department to discuss your intention and request the Partial Retirement Pack.",
        "Receive and complete the Partial Retirement Pack, including relevant forms and certificates."
      ]},
      { title: "Manager & HR Actions", desc: "Your manager updates payroll records", items: [
        "Line manager submits MSS Change Form to Payroll Team to update your payroll record with the new working pattern.",
        "Line manager ensures MSS form indicates 'Partial Retirement' as the reason for the change.",
        "HR sends a confirmation letter to you and the LAS Pensions Team confirming the new working arrangement.",
        "Ensure the MSS Change Form and HR letter match in effective date and working pattern."
      ]},
      { title: "Submit Your Partial Retirement Application", desc: "Send completed forms to LAS Pensions", items: [
        "Return the completed Partial Retirement Application Form and all required certificates to LAS Pensions Team.",
        "Await confirmation from the LAS Pensions Team that your application has been submitted to NHS Pensions."
      ]},
      { title: "Final Confirmation", desc: "Await approval from NHS Pensions", items: [
        "Await formal notification of approval and pension arrangements from NHS Pensions."
      ]}
    ];

    const stepsContainer = document.getElementById("steps");
    const progressBar = document.getElementById("progressBar");
    const progressText = document.getElementById("progressText");
    const lastUpdated = document.getElementById("lastUpdated");
    const contrastBtn = document.getElementById("contrastBtn");
    const resetBtn = document.getElementById("resetBtn");
    const printBtn = document.getElementById("printBtn");

    const checklistState = {};

    function buildSteps() {
      stepsData.forEach((step, sIndex) => {
        const section = document.createElement("section");
        section.className = "section";
        section.innerHTML = `
          <div class="step-header">
            <div class="step-number">${sIndex + 1}</div>
            <div class="step-title"><h2>${step.title}</h2><p>${step.desc}</p></div>
          </div>`;
        const list = document.createElement("ul");
        list.className = "checklist";

        step.items.forEach((item, iIndex) => {
          const li = document.createElement("li");
          li.className = "checklist-item";
          li.dataset.id = `${sIndex + 1}-${iIndex + 1}`;
          li.innerHTML = `<div class="checkbox"></div><div class="checklist-content">${item}</div>`;
          li.addEventListener("click", () => toggleItem(li.dataset.id));
          list.appendChild(li);
        });
        section.appendChild(list);

        if (step.info) {
          const info = document.createElement("div");
          info.className = "info-box";
          info.innerHTML = `<strong>${step.info}</strong>`;
          section.appendChild(info);
        }
        stepsContainer.appendChild(section);
      });
    }

    function initState() {
      document.querySelectorAll(".checklist-item").forEach(item => {
        checklistState[item.dataset.id] = false;
      });
    }

    function applySavedState() {
      const saved = localStorage.getItem("lasPartialRetirementProgress");
      const savedTime = localStorage.getItem("lasPartialRetirementTimestamp");
      if (saved) {
        const parsed = JSON.parse(saved);
        Object.keys(parsed).forEach(id => {
          if (parsed[id]) {
            checklistState[id] = true;
            const li = document.querySelector(`[data-id="${id}"]`);
            li.classList.add("completed");
            li.querySelector(".checkbox").classList.add("checked");
          }
        });
      }
      if (savedTime) lastUpdated.textContent = "Last updated: " + savedTime;
    }

    function toggleItem(id) {
      checklistState[id] = !checklistState[id];
      const li = document.querySelector(`[data-id="${id}"]`);
      const box = li.querySelector(".checkbox");
      li.classList.toggle("completed", checklistState[id]);
      box.classList.toggle("checked", checklistState[id]);
      updateProgress();
      saveProgress();
    }

    function updateProgress() {
      const total = Object.keys(checklistState).length;
      const completed = Object.values(checklistState).filter(Boolean).length;
      const percent = Math.round((completed / total) * 100);
      progressBar.style.width = percent + "%";
      progressText.textContent = `${percent}% Complete`;
    }

    function saveProgress() {
      localStorage.setItem("lasPartialRetirementProgress", JSON.stringify(checklistState));
      const now = new Date().toLocaleString("en-GB", { dateStyle: "medium", timeStyle: "short" });
      localStorage.setItem("lasPartialRetirementTimestamp", now);
      lastUpdated.textContent = "Last updated: " + now;
    }

    function resetProgress() {
      if (!confirm("Reset all progress?")) return;
      Object.keys(checklistState).forEach(id => checklistState[id] = false);
      document.querySelectorAll(".checklist-item").forEach(li => {
        li.classList.remove("completed");
        li.querySelector(".checkbox").classList.remove("checked");
      });
      localStorage.removeItem("lasPartialRetirementProgress");
      localStorage.removeItem("lasPartialRetirementTimestamp");
      lastUpdated.textContent = "Last updated: never";
      updateProgress();
    }

    function toggleContrast() {
      const on = document.body.classList.toggle("high-contrast");
      contrastBtn.textContent = on ? "Disable High-Contrast Mode" : "Enable High-Contrast Mode";
      contrastBtn.setAttribute("aria-pressed", on ? "true" : "false");
    }

    document.addEventListener("DOMContentLoaded", () => {
      buildSteps();
      initState();
      applySavedState();
      updateProgress();
      printBtn.addEventListener("click", () => window.print());
      resetBtn.addEventListener("click", resetProgress);
      contrastBtn.addEventListener("click", toggleContrast);
    });
  </script>
</body>
</html>
